---
interface Props {
	filename: string;
}

const { filename } = Astro.props;
---

<video class="lazy" autoplay loop muted playsinline>
	<source
		data-src={`/media/${filename}.av1.webm`}
		type="video/webm; codecs=av01.0.05M.08,opus"
	/>
	<source data-src={`/media/${filename}.vp9.webm`} type="video/webm" />
	<source data-src={`/media/${filename}.h264.mp4`} type="video/mp4" />
</video>
<noscript>
	<video autoplay loop muted playsinline>
		<source
			src={`/media/${filename}.av1.webm`}
			type="video/webm; codecs=av01.0.05M.08,opus"
		/>
		<source src={`/media/${filename}.vp9.webm`} type="video/webm" />
		<source src={`/media/${filename}.h264.mp4`} type="video/mp4" />
	</video>
</noscript>

<style>
	:global(.no-js) video.lazy {
		display: none;
	}
	video {
		max-width: 100%;
	}
</style>
